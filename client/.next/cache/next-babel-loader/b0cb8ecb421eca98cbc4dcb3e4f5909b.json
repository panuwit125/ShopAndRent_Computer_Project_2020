{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from \"next/link\";\nimport img1 from \"../../public/16.png\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { updateFirstName, updateLastName, updateSsid, updateBird, updatePost } from \"../../store/actions/postAction\";\nimport axios from \"axios\";\nimport Router from \"next/router\";\nconst FormItem = _Form.Item;\nconst {\n  Search\n} = _Input;\n\nfunction setDataProfile() {\n  const dispatch = useDispatch();\n  const {\n    0: token,\n    1: setToken\n  } = useState(null);\n  const {\n    SSID\n  } = useSelector(state => state.post);\n  const pino = \"3640600077526\";\n  useEffect(() => {\n    setToken(localStorage.getItem(\"jwt\"));\n    console.log('set');\n  });\n\n  const handlecheckssid = async () => {\n    await axios({\n      method: \"post\",\n      url: \"https://www.nuscreening.kasemsanm.com/api/v1/patient/patientDetail\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      },\n      data: {\n        \"patient_no\": SSID\n      }\n    }).then(function (res) {\n      localStorage.setItem(\"user\", res.data[\"payload\"]);\n      dispatch(updateFirstName(res.data.payload.firstName));\n      dispatch(updateLastName(res.data.payload.lastName));\n      dispatch(updateSsid(res.data.payload.pid));\n      dispatch(updateBird(res.data.payload.birthDate));\n      dispatch(updatePost(res.data.payload.provinceID));\n      Router.push(\"/page.covid4\");\n    }).catch(err => {\n      console.log(\"เตือนไม่พอข้อมูล\", err.response.status);\n\n      if (err.response.status === 401) {\n        axios({\n          method: \"GET\",\n          url: \"https://www.nuscreening.kasemsanm.com/api/v1/manage/token\",\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"jwt-refresh\")}`\n          }\n        }).then(res => {\n          localStorage.setItem(\"jwt\", res.data[\"accept-token\"]);\n          console.log(\"Update Token Success!\");\n          handlecheckssid();\n        }).catch(error => {\n          console.log(\"Error Code\", error.response.status);\n          Router.push(\"/page.covid1\");\n        });\n      }\n\n      if (err.response.status === 404) {\n        console.log(\"ไม่มีข้อมูลอยู่ในระบบ\");\n        dispatch(updateFirstName(\"\"));\n        dispatch(updateLastName(\"\"));\n        dispatch(updateSsid(\"\"));\n        dispatch(updateBird(\"\"));\n        dispatch(updatePost(\"\"));\n        Router.push(\"/page.covid3\");\n      }\n    });\n  };\n\n  return __jsx(FormItem, null, __jsx(\"div\", null, __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\"\n    }\n  }, __jsx(\"h1\", {\n    style: {\n      fontSize: \"42px\"\n    }\n  }, \"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E43\\u0E2A\\u0E48\\u0E40\\u0E25\\u0E02\\u0E1A\\u0E31\\u0E15\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E0A\\u0E32\\u0E0A\\u0E19\")), __jsx(\"div\", {\n    style: {\n      flexDirection: \"row\",\n      display: \"flex\",\n      width: \"100%\",\n      justifyContent: \"center\"\n    }\n  }, __jsx(\"div\", null, __jsx(_Input, {\n    style: {\n      padding: \"25px\",\n      borderRadius: \"50px 0px 0px 50px\",\n      fontSize: \"22px\",\n      color: \"white\"\n    },\n    placeholder: \"\\u0E40\\u0E25\\u0E02\\u0E1A\\u0E31\\u0E15\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E0A\\u0E32\\u0E0A\\u0E19\",\n    value: SSID,\n    onChange: e => dispatch(updateSsid(e.target.value))\n  })), __jsx(\"div\", null, __jsx(_Button, {\n    style: {\n      height: \"100%\",\n      borderRadius: \"0px 50px 50px 0px\"\n    },\n    type: \"primary\",\n    onClick: handlecheckssid\n  }, \"\\u0E15\\u0E23\\u0E27\\u0E08\\u0E2A\\u0E2D\\u0E1A\"))))));\n}\n\nexport default setDataProfile;","map":null,"metadata":{},"sourceType":"module"}