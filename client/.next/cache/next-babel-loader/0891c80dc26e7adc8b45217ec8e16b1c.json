{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Coding\\\\covid-web-develop\\\\covid-web-develop\\\\pages\\\\components\\\\component.snapshot.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport Webcam from \"react-webcam\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateFirstName, updateLastName, updateSsid } from \"../../store/actions/postAction\";\nimport img1 from \"../../public/1.png\";\nimport Router from \"next/router\";\nimport Axios from \"axios\";\nvar FormItem = _Form.Item;\n\nvar WebcamCapture = function WebcamCapture(props) {\n  _s();\n\n  var dispatch = useDispatch();\n  var webcamRef = React.useRef(null);\n\n  var _useState = useState(\"\"),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      imgSrc = _React$useState2[0],\n      setImgSrc = _React$useState2[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      SSID = _useSelector.SSID;\n\n  var token = \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mbyI6eyJ1c2VybmFtZSI6ImtrayIsImZpcnN0X25hbWUiOiJiYmJiIiwibGFzdF9uYW1lIjoiY2NjYyIsInJvbGUiOiIzIiwiZGVwYXJ0bWVudF9uYW1lX3RoIjoi4LmA4LmA4Lie4LiX4Lii4LmMIiwiZGVwYXJ0bWVudF9uYW1lX2VuIjoiZG9jdG9yIiwiZGVwYXJ0bWVudF9mdWxsX25hbWUiOiLguYDguYDguJ7guJfguKLguYwifSwiaWF0IjoxNTk1MjQyMDQ2LCJleHAiOjE1OTUyNDM4NDZ9.ulvQOR5RwRo8aiWllefolWtTEXm0kbBytRg7VFvTYiM6DEWN_pRb8_05efaDAolKKgQE3LRQzpSiQkJhkOaY0TqYbXC1RjAERcFvHEFg33Zf2oMLv_jI-gqGjxfk4BRb6drWke382cEfoONuXZGRzagS1abvAZ8coh4yQMZPdxeI8KO-IDioT0Jp0PY1PL-lMGA4rCK0rONJUjh7QSrej85fGlOeRRxypxYbcpJatpNUw8UY1Ei57w571pUR9p6gXhfHCtuftjZVCSCvJMyBSbKytneK-Dz5cfvh85X_NpjNpy86ahWIzXoNZlLzFb-TGKSWU_mIU6C0xByB0VXNtrBdxjFGaZZferrqJFQe_DJEXLNg44qOrSHRlNHycZt-gdu5RAeX4cI4dPfwKmgy2ahi8b5eaZqHiEuTYvDfmrDdz7R3p9QaahyGX7YC6GPXfE5avE6lONIU0LI65WVXyoo-561gAZEfQKqIs1qjvgDqiCw56ZGRO4EwFJRna9uz11-7wzimhlXjPKYit8l0JFILfT_4S7X_EOFo1wALrrsimx3X963oPTVvs7hVx02KAhQWd6-YQSBVrykpusK5ZOVPCa8gibSUZaAGuRrWBnOB0otc2Fk75vMbIjJ2P-mWReLkZ-UOo5ea_NA86yDouXNUzpbtkCZT7mRZWTVDZvk\";\n\n  var Axiosphoto = function Axiosphoto(value) {\n    var Command = value;\n    console.log(Command);\n\n    if (Command === \"Errormask\") {\n      alert(\"กรุณาถอดหน้ากาก\");\n    } else if (Command === \"FoundData\") {\n      var Data = [\"3640600077526\", \"สมชาย\", \"หมายปอง\"];\n      dispatch(updateSsid(Data[0]));\n      dispatch(updateFirstName(Data[1]));\n      dispatch(updateSsid(Data[2]));\n      alert(\"พบข้อมูล\");\n      Router.push(\"/page.covid4\");\n    } else if (Command === \"NotFoundData\") {\n      alert(\"ไม่พบข้อมูล\");\n    }\n  };\n\n  function taskOne() {\n    return new Promise(function (resolve) {\n      var A = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var imageSrc, blob;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return webcamRef.current.getScreenshot();\n\n                case 2:\n                  imageSrc = _context.sent;\n                  _context.next = 5;\n                  return fetch(imageSrc).then(function (res) {\n                    //res.blob();\n                    setData(res);\n                    console.log(\"success 1\");\n                  })[\"catch\"](function () {\n                    return console.log(\"error\");\n                  });\n\n                case 5:\n                  blob = _context.sent;\n                  _context.next = 8;\n                  return console.log('1');\n\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function A() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      A();\n      resolve();\n    });\n  }\n\n  function taskTwo() {\n    return new Promise(function (resolve) {\n      var B = /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          var a;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return console.log('2');\n\n                case 2:\n                  /*const formData = new FormData();\r\n                  formData.append(\"picture\", data);*/\n                  a = \"10\";\n                  return _context2.abrupt(\"return\", a);\n\n                case 4:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function B() {\n          return _ref2.apply(this, arguments);\n        };\n      }();\n\n      B();\n      resolve();\n    });\n  }\n\n  function taskThree() {\n    return new Promise(function (resolve) {\n      var C = function C() {\n        //console.log(\"B\", taskTwo.a);\n        console.log('3');\n      };\n\n      C();\n      resolve();\n    });\n  }\n\n  var main = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return taskOne();\n\n            case 2:\n              _context3.next = 4;\n              return taskTwo();\n\n            case 4:\n              _context3.next = 6;\n              return taskThree();\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function main() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var capture = React.useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            //const imageSrc = await webcamRef.current.getScreenshot();\n            main(); //const formData = new FormData();\n            //formData.append('picture');\n            //console.log(formData)\n\n            /*Axios({\r\n                method:\"post\",\r\n                url:\"http://34.87.54.114:8003/api/v1/file/uploadphoto\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data'\r\n                  },\r\n              data:{ picture:blob}\r\n            }).then((res)=>{\r\n                console.log('success',res)\r\n            }).catch((error)=>{\r\n                console.log('error',error)\r\n            })*/\n            //await console.log(\"1\", data);\n            //await Axiosphoto(\"Errormask\");\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  })), [webcamRef, setImgSrc]);\n  useEffect(function () {\n    var formData = new FormData();\n\n    if (data === \"\") {} else {\n      console.log(data);\n      formData.append(\"picture.png\", data);\n      console.log(formData);\n    }\n  }, [data]);\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, __jsx(FormItem, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, __jsx(Webcam, {\n    audio: false,\n    ref: webcamRef,\n    screenshotFormat: \"image/jpeg\",\n    style: {\n      borderRadius: \"20px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  })), __jsx(_Button, {\n    onClick: capture,\n    style: {\n      width: \"100%\"\n    },\n    type: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, \"Capture photo\"), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    src: imgSrc,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }))));\n};\n\n_s(WebcamCapture, \"MzR/OKf8ow8WgjPHzx9vVTQ8cQM=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = WebcamCapture;\nexport default WebcamCapture;\n\nvar _c;\n\n$RefreshReg$(_c, \"WebcamCapture\");","map":{"version":3,"sources":["D:/Coding/covid-web-develop/covid-web-develop/pages/components/component.snapshot.js"],"names":["React","useEffect","useState","Webcam","useDispatch","useSelector","updateFirstName","updateLastName","updateSsid","img1","Router","Axios","FormItem","Item","WebcamCapture","props","dispatch","webcamRef","useRef","data","setData","imgSrc","setImgSrc","state","post","SSID","token","Axiosphoto","value","Command","console","log","alert","Data","push","taskOne","Promise","resolve","A","current","getScreenshot","imageSrc","fetch","then","res","blob","taskTwo","B","a","taskThree","C","main","capture","useCallback","formData","FormData","append","borderRadius","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Webcam from \"react-webcam\";\r\nimport {\r\n  Form,\r\n  Select,\r\n  InputNumber,\r\n  DatePicker,\r\n  Switch,\r\n  Slider,\r\n  Button,\r\n} from \"antd\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  updateFirstName,\r\n  updateLastName,\r\n  updateSsid,\r\n} from \"../../store/actions/postAction\";\r\nimport img1 from \"../../public/1.png\";\r\nimport Router from \"next/router\";\r\nimport Axios from \"axios\";\r\n\r\nconst FormItem = Form.Item;\r\n\r\nconst WebcamCapture = (props) => {\r\n  const dispatch = useDispatch();\r\n  const webcamRef = React.useRef(null);\r\n  const [data, setData] = useState(\"\");\r\n  const [imgSrc, setImgSrc] = React.useState(null);\r\n  const { SSID } = useSelector((state) => state.post);\r\n  const token =\r\n    \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mbyI6eyJ1c2VybmFtZSI6ImtrayIsImZpcnN0X25hbWUiOiJiYmJiIiwibGFzdF9uYW1lIjoiY2NjYyIsInJvbGUiOiIzIiwiZGVwYXJ0bWVudF9uYW1lX3RoIjoi4LmA4LmA4Lie4LiX4Lii4LmMIiwiZGVwYXJ0bWVudF9uYW1lX2VuIjoiZG9jdG9yIiwiZGVwYXJ0bWVudF9mdWxsX25hbWUiOiLguYDguYDguJ7guJfguKLguYwifSwiaWF0IjoxNTk1MjQyMDQ2LCJleHAiOjE1OTUyNDM4NDZ9.ulvQOR5RwRo8aiWllefolWtTEXm0kbBytRg7VFvTYiM6DEWN_pRb8_05efaDAolKKgQE3LRQzpSiQkJhkOaY0TqYbXC1RjAERcFvHEFg33Zf2oMLv_jI-gqGjxfk4BRb6drWke382cEfoONuXZGRzagS1abvAZ8coh4yQMZPdxeI8KO-IDioT0Jp0PY1PL-lMGA4rCK0rONJUjh7QSrej85fGlOeRRxypxYbcpJatpNUw8UY1Ei57w571pUR9p6gXhfHCtuftjZVCSCvJMyBSbKytneK-Dz5cfvh85X_NpjNpy86ahWIzXoNZlLzFb-TGKSWU_mIU6C0xByB0VXNtrBdxjFGaZZferrqJFQe_DJEXLNg44qOrSHRlNHycZt-gdu5RAeX4cI4dPfwKmgy2ahi8b5eaZqHiEuTYvDfmrDdz7R3p9QaahyGX7YC6GPXfE5avE6lONIU0LI65WVXyoo-561gAZEfQKqIs1qjvgDqiCw56ZGRO4EwFJRna9uz11-7wzimhlXjPKYit8l0JFILfT_4S7X_EOFo1wALrrsimx3X963oPTVvs7hVx02KAhQWd6-YQSBVrykpusK5ZOVPCa8gibSUZaAGuRrWBnOB0otc2Fk75vMbIjJ2P-mWReLkZ-UOo5ea_NA86yDouXNUzpbtkCZT7mRZWTVDZvk\";\r\n\r\n  const Axiosphoto = (value) => {\r\n    const Command = value;\r\n    console.log(Command);\r\n    if (Command === \"Errormask\") {\r\n      alert(\"กรุณาถอดหน้ากาก\");\r\n    } else if (Command === \"FoundData\") {\r\n      const Data = [\"3640600077526\", \"สมชาย\", \"หมายปอง\"];\r\n      dispatch(updateSsid(Data[0]));\r\n      dispatch(updateFirstName(Data[1]));\r\n      dispatch(updateSsid(Data[2]));\r\n      alert(\"พบข้อมูล\");\r\n      Router.push(\"/page.covid4\");\r\n    } else if (Command === \"NotFoundData\") {\r\n      alert(\"ไม่พบข้อมูล\");\r\n    }\r\n  };\r\n\r\n  function taskOne() {\r\n    return new Promise((resolve) => {\r\n      const A = async () => {\r\n        const imageSrc = await webcamRef.current.getScreenshot();\r\n        const blob = await fetch(imageSrc)\r\n          .then((res) => {\r\n            //res.blob();\r\n            setData(res);\r\n            console.log(\"success 1\");\r\n          })\r\n          .catch(() => console.log(\"error\"));\r\n          await console.log('1')\r\n      };\r\n      A();\r\n      resolve();\r\n    });\r\n  }\r\n  function taskTwo() {\r\n    return new Promise((resolve) => {\r\n      const B = async () => {\r\n        //console.log(data);\r\n        await console.log('2')\r\n        /*const formData = new FormData();\r\n      formData.append(\"picture\", data);*/\r\n        const a = \"10\";\r\n        return a\r\n      };\r\n      B();\r\n      resolve();\r\n    });\r\n  }\r\n  function taskThree() {\r\n    return new Promise((resolve) => {\r\n      const C = () => {\r\n        //console.log(\"B\", taskTwo.a);\r\n        console.log('3')\r\n      };\r\n      C();\r\n      resolve();\r\n    });\r\n  }\r\n\r\n  const main = async () => {\r\n    await taskOne();\r\n    await taskTwo();\r\n    await taskThree();\r\n  };\r\n\r\n  const capture = React.useCallback(async () => {\r\n    //const imageSrc = await webcamRef.current.getScreenshot();\r\n    main();\r\n    //const formData = new FormData();\r\n    //formData.append('picture');\r\n    //console.log(formData)\r\n    /*Axios({\r\n        method:\"post\",\r\n        url:\"http://34.87.54.114:8003/api/v1/file/uploadphoto\",\r\n        headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'multipart/form-data'\r\n          },\r\n      data:{ picture:blob}\r\n    }).then((res)=>{\r\n        console.log('success',res)\r\n    }).catch((error)=>{\r\n        console.log('error',error)\r\n    })*/\r\n    //await console.log(\"1\", data);\r\n    //await Axiosphoto(\"Errormask\");\r\n  }, [webcamRef, setImgSrc]);\r\n  useEffect(() => {\r\n    const formData = new FormData();\r\n    if (data === \"\") {\r\n    } else {\r\n      console.log(data);\r\n      formData.append(\"picture.png\", data);\r\n      console.log(formData);\r\n    }\r\n  }, [data]);\r\n  return (\r\n    <div>\r\n      <FormItem>\r\n        <div>\r\n          <Webcam\r\n            audio={false}\r\n            ref={webcamRef}\r\n            screenshotFormat=\"image/jpeg\"\r\n            style={{ borderRadius: \"20px\" }}\r\n          />\r\n        </div>\r\n        <Button onClick={capture} style={{ width: \"100%\" }} type=\"primary\">\r\n          Capture photo\r\n        </Button>\r\n        <div>\r\n          <img src={imgSrc} />\r\n        </div>\r\n      </FormItem>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WebcamCapture;\r\n"]},"metadata":{},"sourceType":"module"}