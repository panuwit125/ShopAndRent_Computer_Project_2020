{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Coding\\\\covid-web-develop\\\\covid-web-develop\\\\pages\\\\components\\\\component.snapshot.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState, useInterval } from \"react\";\nimport Webcam from \"react-webcam\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateFirstName, updateLastName, updateSsid, updateToken } from \"../../store/actions/postAction\";\nimport Speechtotext from './component.speechtotext';\nimport Router from \"next/router\";\nimport Axios from \"axios\";\nvar FormItem = _Form.Item;\n\nvar WebcamCapture = function WebcamCapture() {\n  _s();\n\n  var Testimage = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAHgAoADASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAj/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCsAJEVmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//9k=\";\n  var dispatch = useDispatch();\n  var webcamRef = React.useRef(null);\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      imgSrc = _React$useState2[0],\n      setImgSrc = _React$useState2[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      token = _useSelector.token;\n\n  var _useState = useState(false),\n      isLoading = _useState[0],\n      setisLoading = _useState[1];\n\n  var _useState2 = useState(3),\n      isReadyCapture = _useState2[0],\n      setisReacyCapture = _useState2[1];\n\n  var AAA = 3;\n  useEffect(function () {\n    dispatch(updateToken(localStorage.getItem('jwt')));\n\n    if (localStorage.getItem(\"jwt\")) {\n      setisLoading(true);\n    } else {\n      Router.push(\"/page.covid1\");\n    }\n  }, []);\n\n  var Axiosphoto = function Axiosphoto(value) {\n    var Command = value;\n    console.log(Command);\n\n    if (Command === \"Errormask\") {\n      alert(\"กรุณาถอดหน้ากาก\");\n    } else if (Command === \"FoundData\") {\n      var Data = [\"3640600077526\", \"สมชาย\", \"หมายปอง\"];\n      localStorage.setItem(\"User\", Data);\n      dispatch(updateSsid(Data[0]));\n      dispatch(updateFirstName(Data[1]));\n      dispatch(updateLastName(Data[2]));\n      alert(\"พบข้อมูล\");\n      Router.push(\"/page.covid4\");\n    } else if (Command === \"NotFoundData\") {\n      alert(\"ไม่พบข้อมูล,กรุณาโชว์บัตรประชาชนแทน\");\n    }\n  };\n\n  function taskOne() {\n    return new Promise( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resolve) {\n        var A;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                A = /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                    var imageSrc, block, contentType, realData, blob;\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return console.log(\"Token\", token);\n\n                          case 2:\n                            _context.next = 4;\n                            return webcamRef.current.getScreenshot();\n\n                          case 4:\n                            imageSrc = _context.sent;\n                            _context.next = 7;\n                            return console.log(imageSrc);\n\n                          case 7:\n                            _context.next = 9;\n                            return Testimage.split(\";\");\n\n                          case 9:\n                            block = _context.sent;\n                            _context.next = 12;\n                            return block[0].split(\":\")[1];\n\n                          case 12:\n                            contentType = _context.sent;\n                            _context.next = 15;\n                            return block[1].split(\",\")[1];\n\n                          case 15:\n                            realData = _context.sent;\n                            _context.next = 18;\n                            return b64toBlob(realData, contentType);\n\n                          case 18:\n                            blob = _context.sent;\n                            resolve(blob);\n\n                          case 20:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function A() {\n                    return _ref2.apply(this, arguments);\n                  };\n                }();\n\n                _context2.next = 3;\n                return A();\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n\n  function taskTwo(value) {\n    return new Promise( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(resolve) {\n        var B, postimage, formData;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                B = /*#__PURE__*/function () {\n                  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n                    var formData;\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            _context3.next = 2;\n                            return console.log(\"A\", value);\n\n                          case 2:\n                            _context3.next = 4;\n                            return new FormData();\n\n                          case 4:\n                            formData = _context3.sent;\n                            _context3.next = 7;\n                            return formData.append(\"picture\", value);\n\n                          case 7:\n                            return _context3.abrupt(\"return\", formData);\n\n                          case 8:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n\n                  return function B() {\n                    return _ref4.apply(this, arguments);\n                  };\n                }();\n\n                postimage = /*#__PURE__*/function () {\n                  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n                    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            _context4.next = 2;\n                            return Axios.post(\"http://34.87.54.114:8003/api/v1/faceDetect/1\", formData, {\n                              headers: {\n                                Authorization: \"Bearer \".concat(localStorage.getItem(\"jwt\")),\n                                \"Content-Type\": \"multipart/form-data\"\n                              }\n                            }).then(function (res) {\n                              console.log(\"success\", res); //Axiosphoto(\"FoundData\");\n                            })[\"catch\"](function (err) {\n                              console.log(\"เตือนไม่พอข้อมูล\", err.response.status);\n\n                              if (err.response.status === 401) {\n                                Axios({\n                                  method: \"GET\",\n                                  url: \"http://34.87.54.114:8003/api/v1/manage/token\",\n                                  headers: {\n                                    Authorization: \"Bearer \".concat(localStorage.getItem(\"jwt-refresh\"))\n                                  }\n                                }).then(function (res) {\n                                  localStorage.setItem(\"jwt\", res.data[\"accessToken\"]);\n                                  localStorage.setItem(\"jwt-refresh\", res.data[\"refreshToken\"]);\n                                  dispatch(updateToken(res.data[\"accessToken\"]));\n                                  console.log(\"Update Token Success!\", res);\n                                  postimage();\n                                })[\"catch\"](function (error) {\n                                  console.log(\"Error Code\", error.response.status);\n                                  Router.push(\"/page.covid1\");\n                                });\n                              }\n                            });\n\n                          case 2:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  }));\n\n                  return function postimage() {\n                    return _ref5.apply(this, arguments);\n                  };\n                }();\n\n                _context5.next = 4;\n                return B();\n\n              case 4:\n                formData = _context5.sent;\n                _context5.next = 7;\n                return postimage();\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n  }\n\n  var main = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return taskOne();\n\n            case 2:\n              result = _context6.sent;\n              _context6.next = 5;\n              return taskTwo(result);\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function main() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var capture = function capture() {\n    main();\n  };\n  /*const [statee, setStatee] = useState(null);\r\n  const fileSelectedHandler = (event) => {\r\n    setStatee(event.target.files[0]);\r\n    console.log(event.target.files[0]);\r\n  };\r\n  const fileUploadHandler = () => {\r\n    console.log(\"TEST\", statee);\r\n    const fd = new FormData();\r\n    fd.append(\"picture\", statee);\r\n    Axios.post(\"http://34.87.54.114:8003/api/v1/file/uploadphoto\", fd, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(\"success\", res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"err\", err);\r\n      });\r\n  };*/\n\n\n  function b64toBlob(b64Data, contentType, sliceSize) {\n    contentType = contentType || \"\";\n    sliceSize = sliceSize || 512;\n    var byteCharacters = atob(b64Data);\n    var byteArrays = [];\n\n    for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n      var slice = byteCharacters.slice(offset, offset + sliceSize);\n      var byteNumbers = new Array(slice.length);\n\n      for (var i = 0; i < slice.length; i++) {\n        byteNumbers[i] = slice.charCodeAt(i);\n      }\n\n      var byteArray = new Uint8Array(byteNumbers);\n      byteArrays.push(byteArray);\n    }\n\n    var blob = new Blob(byteArrays, {\n      type: contentType\n    });\n    return blob;\n  }\n  /*const test = () => {\r\n    var ImageURL = data;\r\n    console.log(ImageURL);\r\n    var block = ImageURL.split(\";\");\r\n    var contentType = block[0].split(\":\")[1];\r\n    var realData = block[1].split(\",\")[1];\r\n    var blob = b64toBlob(realData, contentType);\r\n    console.log(blob);\r\n    const fd = new FormData();\r\n    fd.append(\"picture\", blob);\r\n    Axios.post(\"http://34.87.54.114:8003/api/v1/file/uploadphoto\", fd, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(\"success\", res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"err\", err);\r\n      });\r\n  };*/\n\n\n  if (isLoading) {\n    var keyword = [\"พร้อมถ่าย\"];\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 7\n      }\n    }, __jsx(FormItem, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }\n    }, __jsx(Speechtotext, {\n      speech: capture,\n      keyword: keyword,\n      page: \"covidsnapshot\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }), __jsx(Webcam, {\n      audio: false,\n      ref: webcamRef,\n      screenshotFormat: \"image/jpeg\",\n      style: {\n        borderRadius: \"20px\",\n        color: \"white\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    })), __jsx(_Button, {\n      onClick: capture,\n      style: {\n        width: \"100%\"\n      },\n      type: \"primary\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }, \"Capture photo\")));\n  } else {\n    console.log(\"Loading....\");\n    return null;\n  }\n};\n\n_s(WebcamCapture, \"WKBW2zZL6FGf75jNbBKBx58GfVA=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = WebcamCapture;\nexport default WebcamCapture;\n\nvar _c;\n\n$RefreshReg$(_c, \"WebcamCapture\");","map":{"version":3,"sources":["D:/Coding/covid-web-develop/covid-web-develop/pages/components/component.snapshot.js"],"names":["React","useEffect","useState","useInterval","Webcam","useDispatch","useSelector","updateFirstName","updateLastName","updateSsid","updateToken","Speechtotext","Router","Axios","FormItem","Item","WebcamCapture","Testimage","dispatch","webcamRef","useRef","imgSrc","setImgSrc","state","post","token","isLoading","setisLoading","isReadyCapture","setisReacyCapture","AAA","localStorage","getItem","push","Axiosphoto","value","Command","console","log","alert","Data","setItem","taskOne","Promise","resolve","A","current","getScreenshot","imageSrc","split","block","contentType","realData","b64toBlob","blob","taskTwo","B","FormData","formData","append","postimage","headers","Authorization","then","res","err","response","status","method","url","data","error","main","result","capture","b64Data","sliceSize","byteCharacters","atob","byteArrays","offset","length","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","Blob","type","keyword","borderRadius","color","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useInterval } from \"react\";\r\nimport Webcam from \"react-webcam\";\r\nimport { Form, Button } from \"antd\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  updateFirstName,\r\n  updateLastName,\r\n  updateSsid,\r\n  updateToken,\r\n} from \"../../store/actions/postAction\";\r\nimport Speechtotext from './component.speechtotext'\r\nimport Router from \"next/router\";\r\nimport Axios from \"axios\";\r\n\r\nconst FormItem = Form.Item;\r\n\r\nconst WebcamCapture = () => {\r\n  const Testimage = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAHgAoADASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAj/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCsAJEVmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//9k=\"\r\n  const dispatch = useDispatch();\r\n  const webcamRef = React.useRef(null);\r\n  const [imgSrc, setImgSrc] = React.useState(null);\r\n  const { token } = useSelector((state) => state.post);\r\n  const [isLoading, setisLoading] = useState(false);\r\n  const [isReadyCapture, setisReacyCapture] = useState(3);\r\n  var AAA = 3;\r\n\r\n  useEffect(() => {\r\n    dispatch(updateToken(localStorage.getItem('jwt')))\r\n    if (localStorage.getItem(\"jwt\")) {\r\n      setisLoading(true);\r\n    } else {\r\n      Router.push(\"/page.covid1\");\r\n    }\r\n  }, []);\r\n\r\n  const Axiosphoto = (value) => {\r\n    const Command = value;\r\n    console.log(Command);\r\n    if (Command === \"Errormask\") {\r\n      alert(\"กรุณาถอดหน้ากาก\");\r\n    } else if (Command === \"FoundData\") {\r\n      const Data = [\"3640600077526\", \"สมชาย\", \"หมายปอง\"];\r\n      localStorage.setItem(\"User\", Data);\r\n      dispatch(updateSsid(Data[0]));\r\n      dispatch(updateFirstName(Data[1]));\r\n      dispatch(updateLastName(Data[2]));\r\n      alert(\"พบข้อมูล\");\r\n      Router.push(\"/page.covid4\");\r\n    } else if (Command === \"NotFoundData\") {\r\n      alert(\"ไม่พบข้อมูล,กรุณาโชว์บัตรประชาชนแทน\");\r\n    }\r\n  };\r\n  function taskOne() {\r\n    return new Promise(async (resolve) => {\r\n      const A = async () => {\r\n        await console.log(\"Token\", token);\r\n        const imageSrc = await webcamRef.current.getScreenshot();\r\n        await console.log(imageSrc);\r\n        var block = await Testimage.split(\";\");\r\n        var contentType = await block[0].split(\":\")[1];\r\n        var realData = await block[1].split(\",\")[1];\r\n        var blob = await b64toBlob(realData, contentType);\r\n        resolve(blob);\r\n      };\r\n      await A();\r\n    });\r\n  }\r\n  function taskTwo(value) {\r\n    return new Promise(async (resolve) => {\r\n      const B = async () => {\r\n        await console.log(\"A\", value);\r\n        const formData = await new FormData();\r\n        await formData.append(\"picture\", value);\r\n        return formData;\r\n      };\r\n      const postimage = async () => {\r\n        await Axios.post(\r\n          \"http://34.87.54.114:8003/api/v1/faceDetect/1\",\r\n          formData,\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n          }\r\n        )\r\n          .then((res) => {\r\n            console.log(\"success\", res);\r\n            //Axiosphoto(\"FoundData\");\r\n          })\r\n          .catch((err) => {\r\n            console.log(\"เตือนไม่พอข้อมูล\", err.response.status);\r\n            if (err.response.status === 401) {\r\n              Axios({\r\n                method: \"GET\",\r\n                url: \"http://34.87.54.114:8003/api/v1/manage/token\",\r\n                headers: {\r\n                  Authorization: `Bearer ${localStorage.getItem(\r\n                    \"jwt-refresh\"\r\n                  )}`,\r\n                },\r\n              })\r\n                .then((res) => {\r\n                  localStorage.setItem(\"jwt\", res.data[\"accessToken\"]);\r\n                  localStorage.setItem(\"jwt-refresh\", res.data[\"refreshToken\"]);\r\n                  dispatch(updateToken(res.data[\"accessToken\"]));\r\n                  console.log(\"Update Token Success!\", res);\r\n                  postimage();\r\n                })\r\n                .catch((error) => {\r\n                  console.log(\"Error Code\", error.response.status);\r\n                  Router.push(\"/page.covid1\");\r\n                });\r\n            }\r\n          });\r\n      };\r\n      var formData = await B();\r\n      await postimage();\r\n    });\r\n  }\r\n\r\n  const main = async () => {\r\n    var result = await taskOne();\r\n    await taskTwo(result);\r\n  };\r\n\r\n  const capture = () => {\r\n      main();\r\n  };\r\n\r\n  /*const [statee, setStatee] = useState(null);\r\n  const fileSelectedHandler = (event) => {\r\n    setStatee(event.target.files[0]);\r\n    console.log(event.target.files[0]);\r\n  };\r\n  const fileUploadHandler = () => {\r\n    console.log(\"TEST\", statee);\r\n    const fd = new FormData();\r\n    fd.append(\"picture\", statee);\r\n    Axios.post(\"http://34.87.54.114:8003/api/v1/file/uploadphoto\", fd, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(\"success\", res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"err\", err);\r\n      });\r\n  };*/\r\n\r\n  function b64toBlob(b64Data, contentType, sliceSize) {\r\n    contentType = contentType || \"\";\r\n    sliceSize = sliceSize || 512;\r\n    var byteCharacters = atob(b64Data);\r\n    var byteArrays = [];\r\n    for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n      var slice = byteCharacters.slice(offset, offset + sliceSize);\r\n      var byteNumbers = new Array(slice.length);\r\n      for (var i = 0; i < slice.length; i++) {\r\n        byteNumbers[i] = slice.charCodeAt(i);\r\n      }\r\n      var byteArray = new Uint8Array(byteNumbers);\r\n      byteArrays.push(byteArray);\r\n    }\r\n    var blob = new Blob(byteArrays, { type: contentType });\r\n    return blob;\r\n  }\r\n\r\n  /*const test = () => {\r\n    var ImageURL = data;\r\n    console.log(ImageURL);\r\n    var block = ImageURL.split(\";\");\r\n    var contentType = block[0].split(\":\")[1];\r\n    var realData = block[1].split(\",\")[1];\r\n    var blob = b64toBlob(realData, contentType);\r\n    console.log(blob);\r\n    const fd = new FormData();\r\n    fd.append(\"picture\", blob);\r\n    Axios.post(\"http://34.87.54.114:8003/api/v1/file/uploadphoto\", fd, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    })\r\n      .then((res) => {\r\n        console.log(\"success\", res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"err\", err);\r\n      });\r\n  };*/\r\n  \r\n  if (isLoading) {\r\n    const keyword = [\"พร้อมถ่าย\"]\r\n    return (\r\n      <div>\r\n        <FormItem>\r\n          <div>\r\n            <Speechtotext speech={capture} keyword={keyword} page={\"covidsnapshot\"} />\r\n            <Webcam\r\n              audio={false}\r\n              ref={webcamRef}\r\n              screenshotFormat=\"image/jpeg\"\r\n              style={{ borderRadius: \"20px\", color: \"white\" }}\r\n            />\r\n          </div>\r\n          <Button onClick={capture} style={{ width: \"100%\" }} type=\"primary\">\r\n            Capture photo\r\n          </Button>\r\n          {/*<div>\r\n            <img src={imgSrc} />\r\n            <input type=\"file\" onChange={fileSelectedHandler} />\r\n          <button onClick={fileUploadHandler}>Upload</button>\r\n          <button onClick={test}>Upload TEST</button>\r\n          </div>*/}\r\n        </FormItem>\r\n      </div>\r\n    );\r\n  } else {\r\n    console.log(\"Loading....\");\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default WebcamCapture;\r\n"]},"metadata":{},"sourceType":"module"}