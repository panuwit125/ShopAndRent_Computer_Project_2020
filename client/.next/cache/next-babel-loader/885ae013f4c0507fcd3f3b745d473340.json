{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from \"next/link\";\nimport img1 from \"../../public/16.png\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { updateFirstName, updateLastName, updateSsid, updateBird, updatePost } from \"../../store/actions/postAction\";\nimport axios from \"axios\";\nimport Router from \"next/router\";\nvar FormItem = _Form.Item;\nvar Search = _Input.Search;\n\nfunction setDataProfile() {\n  var dispatch = useDispatch();\n\n  var _useState = useState(null),\n      token = _useState[0],\n      setToken = _useState[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      SSID = _useSelector.SSID;\n\n  var pino = \"3640600077526\";\n  useEffect(function () {\n    setToken(localStorage.getItem(\"jwt\"));\n    console.log('set');\n  });\n\n  var handlecheckssid = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios({\n                method: \"post\",\n                url: \"http://34.87.54.114:8003/api/v1/patient/patientDetail\",\n                headers: {\n                  Authorization: \"Bearer \".concat(token),\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json;charset=UTF-8\"\n                },\n                data: {\n                  \"patient_no\": SSID\n                }\n              }).then(function (res) {\n                localStorage.setItem(\"user\", res.data[\"payload\"]);\n                dispatch(updateFirstName(res.data.payload.firstName));\n                dispatch(updateLastName(res.data.payload.lastName));\n                dispatch(updateSsid(res.data.payload.pid));\n                dispatch(updateBird(res.data.payload.birthDate));\n                dispatch(updatePost(res.data.payload.provinceID));\n                Router.push(\"/page.covid4\");\n              })[\"catch\"](function (err) {\n                console.log(\"เตือนไม่พอข้อมูล\", err.response.status);\n\n                if (err.response.status === 401) {\n                  axios({\n                    method: \"GET\",\n                    url: \"http://34.87.54.114:8003/api/v1/manage/token\",\n                    headers: {\n                      Authorization: \"Bearer \".concat(localStorage.getItem(\"jwt-refresh\"))\n                    }\n                  }).then(function (res) {\n                    localStorage.setItem(\"jwt\", res.data[\"accept-token\"]);\n                    console.log(\"Update Token Success!\");\n                    handlecheckssid();\n                  })[\"catch\"](function (error) {\n                    console.log(\"Error Code\", error.response.status);\n                    Router.push(\"/page.covid1\");\n                  });\n                }\n\n                if (err.response.status === 404) {\n                  console.log(\"ไม่มีข้อมูลอยู่ในระบบ\");\n                  dispatch(updateFirstName(\"\"));\n                  dispatch(updateLastName(\"\"));\n                  dispatch(updateSsid(\"\"));\n                  dispatch(updateBird(\"\"));\n                  dispatch(updatePost(\"\"));\n                  Router.push(\"/page.covid3\");\n                }\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handlecheckssid() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(FormItem, null, __jsx(\"div\", null, __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\"\n    }\n  }, __jsx(\"h1\", {\n    style: {\n      fontSize: \"42px\"\n    }\n  }, \"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E43\\u0E2A\\u0E48\\u0E40\\u0E25\\u0E02\\u0E1A\\u0E31\\u0E15\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E0A\\u0E32\\u0E0A\\u0E19\")), __jsx(\"div\", {\n    style: {\n      flexDirection: \"row\",\n      display: \"flex\",\n      width: \"100%\",\n      justifyContent: \"center\"\n    }\n  }, __jsx(\"div\", null, __jsx(_Input, {\n    style: {\n      padding: \"25px\",\n      borderRadius: \"50px 0px 0px 50px\",\n      fontSize: \"22px\",\n      color: \"white\"\n    },\n    placeholder: \"\\u0E40\\u0E25\\u0E02\\u0E1A\\u0E31\\u0E15\\u0E23\\u0E1B\\u0E23\\u0E30\\u0E0A\\u0E32\\u0E0A\\u0E19\",\n    value: SSID,\n    onChange: function onChange(e) {\n      return dispatch(updateSsid(e.target.value));\n    }\n  })), __jsx(\"div\", null, __jsx(_Button, {\n    style: {\n      height: \"100%\",\n      borderRadius: \"0px 50px 50px 0px\"\n    },\n    type: \"primary\",\n    onClick: handlecheckssid\n  }, \"\\u0E15\\u0E23\\u0E27\\u0E08\\u0E2A\\u0E2D\\u0E1A\"))))));\n}\n\nexport default setDataProfile;","map":null,"metadata":{},"sourceType":"module"}