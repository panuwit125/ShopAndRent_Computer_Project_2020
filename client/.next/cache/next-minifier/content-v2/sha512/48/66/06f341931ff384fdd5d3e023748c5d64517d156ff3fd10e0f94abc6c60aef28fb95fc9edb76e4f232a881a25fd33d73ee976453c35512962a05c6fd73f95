{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{\"+LI7\":function(A,e,t){\"use strict\";t.r(e);t(\"MaXC\");var r=t(\"4IMT\"),n=t.n(r),o=t(\"o0o1\"),a=t.n(o),i=t(\"HaE+\"),s=t(\"ODXe\"),c=(t(\"nTym\"),t(\"qu0K\")),u=t.n(c),d=t(\"q1tI\"),l=t.n(d),p=t(\"S7Fk\"),h=t.n(p),f=t(\"/MKj\"),v=t(\"S+Er\"),g=t(\"2PoB\"),m=t(\"nOHt\"),y=t.n(m),w=t(\"vDqi\"),S=t.n(w),b=l.a.createElement,E=u.a.Item;e.default=function(){var A=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAHgAoADASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAj/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCsAJEVmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//9k=\",e=Object(f.b)(),t=l.a.useRef(null),r=l.a.useState(null),o=Object(s.a)(r,2),c=(o[0],o[1],Object(f.c)((function(A){return A.post})).token),u=Object(d.useState)(!1),p=u[0],m=u[1],w=Object(d.useState)(3);w[0],w[1];Object(d.useEffect)((function(){e(Object(v.g)(localStorage.getItem(\"jwt\"))),localStorage.getItem(\"jwt\")?m(!0):y.a.push(\"/page.covid1\")}),[]);var O=function(A){var t=A;if(console.log(t.code),\"111\"===t.code)alert(\"\\u0e01\\u0e23\\u0e38\\u0e13\\u0e32\\u0e16\\u0e2d\\u0e14\\u0e2b\\u0e19\\u0e49\\u0e32\\u0e01\\u0e32\\u0e01\");else if(\"100\"===t.code){localStorage.setItem(\"User\",JSON.stringify(A.payload)),e(Object(v.e)(A.payload.cid)),e(Object(v.b)(A.payload.fisrt_name)),e(Object(v.c)(A.payload.last_name)),alert(\"\\u0e1e\\u0e1a\\u0e02\\u0e49\\u0e2d\\u0e21\\u0e39\\u0e25\"),y.a.push(\"/page.covid4\")}else\"110\"===t.code&&alert(\"\\u0e44\\u0e21\\u0e48\\u0e1e\\u0e1a\\u0e02\\u0e49\\u0e2d\\u0e21\\u0e39\\u0e25,\\u0e01\\u0e23\\u0e38\\u0e13\\u0e32\\u0e42\\u0e0a\\u0e27\\u0e4c\\u0e1a\\u0e31\\u0e15\\u0e23\\u0e1b\\u0e23\\u0e30\\u0e0a\\u0e32\\u0e0a\\u0e19\\u0e41\\u0e17\\u0e19\")};function M(A){return new Promise(function(){var t=Object(i.a)(a.a.mark((function t(r){var n,o,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,console.log(\"A\",A);case 2:return e.next=4,new FormData;case 4:return t=e.sent,e.next=7,t.append(\"picture\",A);case 7:return e.abrupt(\"return\",t);case 8:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var A=Object(i.a)(a.a.mark((function A(){return a.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,S.a.post(\"http://34.87.54.114:8003/api/v1/faceDetect/1\",s,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt\")),\"Content-Type\":\"multipart/form-data\"}}).then((function(A){console.log(\"success\",A.data),O(A.data)})).catch((function(A){console.log(\"\\u0e40\\u0e15\\u0e37\\u0e2d\\u0e19\\u0e44\\u0e21\\u0e48\\u0e1e\\u0e2d\\u0e02\\u0e49\\u0e2d\\u0e21\\u0e39\\u0e25\",A.response.status),401===A.response.status&&S()({method:\"GET\",url:\"http://34.87.54.114:8003/api/v1/manage/token\",headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"jwt-refresh\"))}}).then((function(A){localStorage.setItem(\"jwt\",A.data.accessToken),localStorage.setItem(\"jwt-refresh\",A.data.refreshToken),e(Object(v.g)(A.data.accessToken)),console.log(\"Update Token Success!\",A),o()})).catch((function(A){console.log(\"Error Code\",A.response.status),y.a.push(\"/page.covid1\")}))}));case 2:case\"end\":return A.stop()}}),A)})));return function(){return A.apply(this,arguments)}}(),t.next=4,n();case 4:return s=t.sent,t.next=7,o();case 7:case\"end\":return t.stop()}}),t)})));return function(A){return t.apply(this,arguments)}}())}var j=function(){var e=Object(i.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(i.a)(a.a.mark((function e(){var n,o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,console.log(\"Token\",c);case 2:return e.next=4,t.current.getScreenshot();case 4:return n=e.sent,e.next=7,console.log(n);case 7:return e.next=9,A.split(\";\");case 9:return o=e.sent,e.next=12,o[0].split(\":\")[1];case 12:return i=e.sent,e.next=15,o[1].split(\",\")[1];case 15:return s=e.sent,e.next=18,x(s,i);case 18:u=e.sent,r(u);case 20:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,n();case 3:case\"end\":return e.stop()}}),e)})));return function(A){return e.apply(this,arguments)}}());case 2:return r=e.sent,e.next=5,M(r);case 5:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){j()};function x(A,e,t){e=e||\"\",t=t||512;for(var r=atob(A),n=[],o=0;o<r.length;o+=t){for(var a=r.slice(o,o+t),i=new Array(a.length),s=0;s<a.length;s++)i[s]=a.charCodeAt(s);var c=new Uint8Array(i);n.push(c)}return new Blob(n,{type:e})}if(p){return b(\"div\",null,b(E,null,b(\"div\",null,b(g.default,{speech:U,keyword:[\"\\u0e1e\\u0e23\\u0e49\\u0e2d\\u0e21\\u0e16\\u0e48\\u0e32\\u0e22\"],page:\"covidsnapshot\"}),b(h.a,{audio:!1,ref:t,screenshotFormat:\"image/jpeg\",style:{borderRadius:\"20px\",color:\"white\"}})),b(n.a,{onClick:U,style:{width:\"100%\"},type:\"primary\"},\"Capture photo\")))}return console.log(\"Loading....\"),null}},S7Fk:function(A,e,t){var r;r=function(A){return function(A){var e={};function t(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return A[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=A,t.c=e,t.d=function(A,e,r){t.o(A,e)||Object.defineProperty(A,e,{enumerable:!0,get:r})},t.r=function(A){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(A,\"__esModule\",{value:!0})},t.t=function(A,e){if(1&e&&(A=t(A)),8&e)return A;if(4&e&&\"object\"===typeof A&&A&&A.__esModule)return A;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:A}),2&e&&\"string\"!=typeof A)for(var n in A)t.d(r,n,function(e){return A[e]}.bind(null,n));return r},t.n=function(A){var e=A&&A.__esModule?function(){return A.default}:function(){return A};return t.d(e,\"a\",e),e},t.o=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},t.p=\"\",t(t.s=\"./src/react-webcam.tsx\")}({\"./src/react-webcam.tsx\":function(A,e,t){\"use strict\";t.r(e);var r=t(\"react\"),n=function(){var A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)e.hasOwnProperty(t)&&(A[t]=e[t])})(e,t)};return function(e,t){function r(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),o=function(){return(o=Object.assign||function(A){for(var e,t=1,r=arguments.length;t<r;t++)for(var n in e=arguments[t])Object.prototype.hasOwnProperty.call(e,n)&&(A[n]=e[n]);return A}).apply(this,arguments)},a=function(A,e){var t={};for(var r in A)Object.prototype.hasOwnProperty.call(A,r)&&e.indexOf(r)<0&&(t[r]=A[r]);if(null!=A&&\"function\"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(A);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(A,r[n])&&(t[r[n]]=A[r[n]])}return t};function i(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}\"undefined\"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(A){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e?new Promise((function(t,r){e.call(navigator,A,t,r)})):Promise.reject(new Error(\"getUserMedia is not implemented in this browser\"))}));var s=function(A){function e(e){var t=A.call(this,e)||this;return t.canvas=null,t.ctx=null,t.state={hasUserMedia:!1},t}return n(e,A),e.prototype.componentDidMount=function(){var A=this.state,e=this.props;i()?A.hasUserMedia||this.requestUserMedia():e.onUserMediaError(\"getUserMedia not supported\")},e.prototype.componentDidUpdate=function(A){var e=this.props;if(i()){var t=JSON.stringify(A.audioConstraints)!==JSON.stringify(e.audioConstraints),r=JSON.stringify(A.videoConstraints)!==JSON.stringify(e.videoConstraints),n=A.minScreenshotWidth!==e.minScreenshotWidth,o=A.minScreenshotHeight!==e.minScreenshotHeight;(r||n||o)&&(this.canvas=null,this.ctx=null),(t||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else e.onUserMediaError(\"getUserMedia not supported\")},e.prototype.componentWillUnmount=function(){this.stopAndCleanup()},e.prototype.stopAndCleanup=function(){var A=this.state;A.hasUserMedia&&(this.stream&&(this.stream.getVideoTracks&&this.stream.getAudioTracks?(this.stream.getVideoTracks().map((function(A){return A.stop()})),this.stream.getAudioTracks().map((function(A){return A.stop()}))):this.stream.stop()),A.src&&window.URL.revokeObjectURL(A.src))},e.prototype.getScreenshot=function(A){var e=this.state,t=this.props;if(!e.hasUserMedia)return null;var r=this.getCanvas(A);return r&&r.toDataURL(t.screenshotFormat,t.screenshotQuality)},e.prototype.getCanvas=function(A){var e=this.state,t=this.props;if(!this.video)return null;if(!e.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,n=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var o=r/n;n=(r=t.minScreenshotWidth||this.video.clientWidth)/o,t.minScreenshotHeight&&n<t.minScreenshotHeight&&(r=(n=t.minScreenshotHeight)*o)}this.canvas=document.createElement(\"canvas\"),this.canvas.width=(null===A||void 0===A?void 0:A.width)||r,this.canvas.height=(null===A||void 0===A?void 0:A.height)||n,this.ctx=this.canvas.getContext(\"2d\")}var a=this.ctx,i=this.canvas;return a&&i&&(t.mirrored&&(a.translate(i.width,0),a.scale(-1,1)),a.imageSmoothingEnabled=t.imageSmoothing,a.drawImage(this.video,0,0,i.width,i.height),t.mirrored&&(a.scale(-1,1),a.translate(-i.width,0))),i},e.prototype.requestUserMedia=function(){var A=this,e=this.props,t=function(t,r){var n={video:\"undefined\"===typeof r||r};e.audio&&(n.audio=\"undefined\"===typeof t||t),navigator.mediaDevices.getUserMedia(n).then((function(e){A.handleUserMedia(null,e)})).catch((function(e){A.handleUserMedia(e)}))};if(\"mediaDevices\"in navigator)t(e.audioConstraints,e.videoConstraints);else{var r=function(A){return{optional:[{sourceId:A}]}},n=function(A){var e=A.deviceId;return\"string\"===typeof e?e:Array.isArray(e)&&e.length>0?e[0]:\"object\"===typeof e&&e.ideal?e.ideal:null};MediaStreamTrack.getSources((function(A){var o=null,a=null;A.forEach((function(A){\"audio\"===A.kind?o=A.id:\"video\"===A.kind&&(a=A.id)}));var i=n(e.audioConstraints);i&&(o=i);var s=n(e.videoConstraints);s&&(a=s),t(r(o),r(a))}))}},e.prototype.handleUserMedia=function(A,e){var t=this.props;if(A||!e)return this.setState({hasUserMedia:!1}),void t.onUserMediaError(A);this.stream=e;try{this.video&&(this.video.srcObject=e),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(e)})}t.onUserMedia(e)},e.prototype.render=function(){var A=this,e=this.state,t=this.props,n=t.audio,i=(t.forceScreenshotSourceSize,t.onUserMedia,t.onUserMediaError,t.screenshotFormat,t.screenshotQuality,t.minScreenshotWidth,t.minScreenshotHeight,t.audioConstraints,t.videoConstraints,t.imageSmoothing,t.mirrored),s=t.style,c=void 0===s?{}:s,u=a(t,[\"audio\",\"forceScreenshotSourceSize\",\"onUserMedia\",\"onUserMediaError\",\"screenshotFormat\",\"screenshotQuality\",\"minScreenshotWidth\",\"minScreenshotHeight\",\"audioConstraints\",\"videoConstraints\",\"imageSmoothing\",\"mirrored\",\"style\"]),d=i?o(o({},c),{transform:(c.transform||\"\")+\" scaleX(-1)\"}):c;return r.createElement(\"video\",o({autoPlay:!0,src:e.src,muted:n,playsInline:!0,ref:function(e){A.video=e},style:d},u))},e.defaultProps={audio:!0,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:\"image/webp\",screenshotQuality:.92},e}(r.Component);e.default=s},react:function(e,t){e.exports=A}}).default},A.exports=r(t(\"q1tI\"))}}]);","extractedComments":[]}